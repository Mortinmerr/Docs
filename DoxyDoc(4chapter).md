
# Документирование файлов
## Уровень отдельных файлов.
### Общие рекомендации
Для облегчения навигации по исходным файлам, созданными Вами или другими разработчиками, 
рекомендуется использовать описанные ниже разделы в исходных файлах. Разделы созданы для 
разделения отдельных сущностей в коде. Если какой-то из разделов не имеет наполнения, раздел
все равно следует оставить, для упрощения навигации в коде и сохранения общего вида файлов. 
    
### Файлы \*.с
#### Структура файла:
1. **Шапка**  
  Описана в предыдущих главах данной статьи.

2. **Разделы:**  
    - **Standard C-libraries**  
  Предназначен для перечисления подключаемых файлов из состава 
  стандартных библиотек. Если в вашем исходном файле нет подключения
  стандартных библиотек, оглавление раздела нужно оставить, и добавить
  в следующей строке, строку с содержанием `//None`.

    - **Dependencies Libraries**  
  Предназначен для перечисления *НЕ*стандартных подключаемых файлов  
  или библиотек. По сути, это раздел для перечисления файлов и библиотек,
  от которых зависит текущий файл (например зависимость кода от платформы). 

    - **Defines and Macros**  
  Предназначен для перечисления тех define-ов и macro вставок, которые не
  требуют изоляции от внешней среды. Так же, можно использовать для создания
  константных значений, перечислений и подобное.

    - **Protected local use Defines and Macros**  
  Предназначен для перечисления тех define-ов и macro вставок, которые
  требуют изоляции от внешней среды. В самом конце исходного файла
  есть раздел "Undefine Local Defines and Macro", в котором, 
  в обязательном порядке, нужно деактивировать выделенные в пространстве
  имен дефайны и макро-вставки, или вернуть значение переназначенных дефайнов.

    - **Internal Data Types**  
  Предназначен для объявления внутренних типов данных через typedef или
  struct. Локальные, служебные типы данных.
        
    - **Module Global Variables**  
  Предназначен для объявления локальных, служебных, глобальных переменных
  модуля, или проброса внешних глобальных переменных.

    - **Internal Functions**  
  Предназначен для объявления и определения локальных, служебных функций.
  Локальных, в данном контексте - это те функции, которые не будут
  использоваться "снаружи", и не будут объявлены в \*.h файле.  

    - **Public Functions**  
  Предназначен для объявления и определения публичных функций, которые
  будут доступны "снаружи", через объявление в \*.h файле.  

    - **Undefine Local Defines and Macro**  
  Раздел, упомянутый в пункте Protected local use Defines and Macros.
  Предназначен для деактивации объявленных ранее дефайнов и макро.
  
  3. **EOF**  
  Последняя строка файла, означающая его конец.

#### **Шаблон**:
  ```
  /*******************************************************************************
   * @file    file.c
   * @author  name
   * @date    yyyy-mm-dd
   *
   * @brief   Короткое оглавление, предназначение файла
   *
   * @details Полное описание, необходимая теория, термины, аббревиатуры и т.д.
   *
   * @todo Тут можно писать о том, что нужно доделать
   * @todo или улучшить.
   * @todo Это отобразится в сгенерированной документации.
   ******************************************************************************/

  //////////////////////////////Standard C-libraries//////////////////////////////
  //None



  /////////////////////////////Dependencies Libraries/////////////////////////////
  //None



  //////////////////////////////Defines and Macros////////////////////////////////
  //None



  //////////////////////Protected local use Defines and Macros////////////////////
  //None


  /////////////////////////////Internal Data Types////////////////////////////////
  //None


  ////////////////////////////Module Global Variables/////////////////////////////
  //None


  //////////////////////////////Internal Functions////////////////////////////////
  //None


  ///////////////////////////////Public Functions/////////////////////////////////
  //None


  ////////////////////////Undefine Local Defines and Macro////////////////////////
  //None


  /////////////////////////////////////EOF////////////////////////////////////////
  ```

### Файлы \*.h
#### Структура файла:
1. **Шапка**  

2. **Include Guard**  
  
      Обязательный фрагмент, который защищает от повторного объявления, при
      подключении заголовочного файла в нескольких местах (других исходных
      файлах). `FILE_H` следует заменить на имя Вашего файла.  
      
      Имя файла пишется обязательно только заглавными буквами, а расширение файла "\*\_H".  

      ```C
        #ifndef FILE_H
        #define FILE_H

          // Ваш код

        #endif
      ```

3. **C-linkage guard**  

    Чтобы зафиксировать C-линковку объявлений при подключении заголовочного файла из C++, их необходимо обернуть в специальную защитную конструкцию (guard):

    ```C
      #ifdef __cplusplus
      extern "C" {
      #endif /*__cplusplus*/

          // Ваш код

      #ifdef __cplusplus
      }
      #endif /*__cplusplus*/
    ```
В данном примере не нужно ничего менять - это готовый шаблон который обязательно должен присутствовать в файлах *.h, написанных на языке С.

Пояснение:   Мы обычно пользуемся компиляторами, встроенными в среды разработки, даже не задумываясь о том, 
какие именно параметры они используют или как выглядит их вызов из командной строки. 
Чаще всего это компиляторы C++. При этом язык компиляции определяется не только расширением файла, 
но и указанными флагами, например -x c или -x c++.  
Если исходный код функций скомпилирован как C,
а их заголовок подключается в C++-модуль, компилятор C++ может изменить имена объявлений, 
добавив к ним служебную информацию (так называемое name mangling). 
В результате линковщик не сможет сопоставить эти функции с их реализацией на C, и возникнет ошибка при связывании.  


5. **Разделы:**
      - **Standart C-libraries**  
      Предназначен для перечисления подключаемых файлов из состава
      стандартных библиотек. Если в вашем исходном файле нет подключения
      стандартных библиотек, оглавление раздела нужно оставить, и добавить
      в следующей строке, строку с содержанием `//None`.  

      - **Dependendencies Librares**  
      Предназначен для перечисления *НЕ*стандартных подключаемых файлов
      или библиотек. По сути,  это раздел для перечисления файлов и библиотек,
      от которых зависит Ваш исходный файл.

      - **Defines and Macros**  
      Предназначен для перечисления тех define-ов и macro вставок, которые не
      требуют изоляции от внешней среды. Так же, можно использовать для создания
      константных значений, перечислений и подобное.

      - **Protected local use Defines and Macros**  
      Предназначен для перечисления тех define-ов и macro вставок, которые
      требуют изоляции от внешней среды. В самом конце исходного файла
      есть раздел "Undefine Local Defines and Macro", в котором,
      в обязательном порядке, нужно деактивировать выделенные в пространстве
      имен дефайны и макро-вставки.
      Или вернуть значение переназначенных дефайнов.

      - **Data Types**  
      Предназначен для объявления доступных снаружи типов данных через typedef или
      struct. Публичные типы данных.

      - **Module Global Variables**  
      Предназначен для объявления глобальных переменных. Глобальные переменные модуля.

      - **Functions**  
      Предназначен для объявления и определения публичных функций, которые
      будут доступны снаружи, а определение которых размещено в связанном
      \*.c файле. Так же, можно использовать для определения публичных
      inline функций (например API). 
      - **Undefine Local Defines and Macro**  
      Раздел, упомянутый в пункте Protected local use Defines and Macros.
      Предназначен для деактивации объявленных ранее дефайнов и макро.
    - **EOF**    
    Последняя строка файла, означающая его конец.  

#### **Шаблон**:
  ```
  /******************************************************************************
   * @file    file.h
   * @author  name
   * @date    yyyy-mm-dd
   * @version major.minor.patch.rev
   *
   * @brief   Короткое оглавление, предназначение файла
   *
   * @details Полное описание, необходимая теория, термины, аббревиатуры и т.д.
   *
   * @todo Тут можно писать о том, что нужно доделать
   * @todo или улучшить.
   * @todo Это отобразится в сгенерированной документации
   ******************************************************************************/

  #ifndef FILE_H
  #define FILE_H


  #ifdef __cplusplus
  extern "C" {
  #endif /*__cplusplus*/

  //////////////////////////////Standard C-libraries//////////////////////////////
  //None


  /////////////////////////////Dependencies Libraries/////////////////////////////
  //None


  //////////////////////////////Defines and Macros////////////////////////////////
  //None


  //////////////////////Protected local use Defines and Macros////////////////////
  //None


  //////////////////////////////////Data types////////////////////////////////////
  //None


  ////////////////////////////Module Global Variables/////////////////////////////
  //None


  //////////////////////////////////Functions/////////////////////////////////////
  //None


  ////////////////////////Undefine Local Defines and Macro////////////////////////
  //None



  #ifdef __cplusplus
  }
  #endif /*__cplusplus*/

  #endif /*Include Guard*/

  /////////////////////////////////////EOF////////////////////////////////////////
```

